# Claude Code 项目配置

这个文件定义了 Claude Code 在此项目中的行为准则和代码风格。

## 项目概述

这是一个示例项目，用于展示如何使用 Claude Code GitHub Actions。
项目包含一个简单的计算器类和相应的测试用例。

## 代码风格

### JavaScript/Node.js

- 使用 ES6+ 语法
- 使用 const 和 let，避免使用 var
- 函数名使用 camelCase
- 类名使用 PascalCase
- 常量使用 UPPER_SNAKE_CASE

### 注释规范

- 所有函数必须有 JSDoc 注释
- 注释应该说明"做什么"和"为什么"，而不是"怎么做"
- 复杂逻辑必须添加行内注释

### 错误处理

- 所有可能失败的函数必须进行参数验证
- 除零检查必须抛出明确的错误：`throw new Error('除数不能为零')`
- 空数组检查必须抛出错误：`throw new Error('数组不能为空')`
- 非数字检查：使用 `typeof num !== 'number'` 或 `isNaN()`

## 测试规范

- 使用 Jest 框架
- 测试文件命名：`*.test.js`
- 测试描述使用中文
- 每个 test 应该有清晰的描述
- 边界情况必须测试（0、负数、空数组等）

## 提交规范

提交信息格式：
```
类型(范围): 简短描述

详细说明（可选）
```

类型：
- `feat`: 新功能
- `fix`: 修复 bug
- `docs`: 文档更新
- `test`: 测试相关
- `refactor`: 重构
- `style`: 代码格式（不影响功能）
- `chore`: 构建/工具相关

示例：
```
fix(calculator): 添加除零检查

- 在 divide 方法中添加除数验证
- 抛出明确的错误信息
- 添加相应的测试用例
```

## 代码审查要点

在进行代码审查时，Claude 应该关注：

1. **安全性**：检查是否有未处理的边界情况
2. **错误处理**：所有可能的错误情况是否都有处理
3. **性能**：是否有明显的性能问题
4. **可读性**：代码是否清晰易懂
5. **测试覆盖**：关键逻辑是否有测试

## AI 行为准则

当 Claude Code 在此项目中工作时：

1. **优先修复失败的测试**：在添加新功能前，确保所有测试通过
2. **保持向后兼容**：不要破坏现有 API
3. **添加测试**：修复 bug 或添加功能时，必须添加相应的测试
4. **更新文档**：如果改变了 API，更新 JSDoc 注释
5. **遵循现有模式**：参考项目中已有的代码风格和模式

## 项目结构

```
.
├── src/
│   ├── calculator.js       # 主代码
│   └── calculator.test.js  # 测试文件
├── .github/
│   └── workflows/          # GitHub Actions 配置
├── CLAUDE.md               # 本文件
├── package.json
└── README.md
```

## 常见任务

### 修复失败的测试

```bash
# 运行测试查看失败
npm test

# 找到失败的测试，分析原因
# 修复代码
# 再次运行测试确认通过
npm test
```

### 添加新功能

1. 在相应的类中添加新方法
2. 添加 JSDoc 注释
3. 在测试文件中添加测试用例
4. 运行测试确保通过
5. 提交代码

### 代码审查清单

- [ ] 所有测试通过
- [ ] 新代码有 JSDoc 注释
- [ ] 错误处理完善
- [ ] 遵循代码风格
- [ ] 没有明显的性能问题
- [ ] 边界情况已考虑
